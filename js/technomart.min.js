"use strict";(function(){var h;var d=[];var j=function(){k(this.dataPopup)};var e=function(l){if(l.target===h){g()}};var a=function(l){if(l.keyCode===27){g()}};var g=function(){var l=d.pop();if(l){k(l)}else{h.classList.remove("active");document.removeEventListener("keydown",a)}};var k=function(l){var n=l.querySelectorAll(".popup-close");for(var m=0;m<n.length;m++){n[m].removeEventListener("click",j)}l.classList.remove("active");l.classList.remove("popup-error");var m=d.indexOf(l);if(m>=0){d.splice(m,1)}if(d.length===0){h.classList.remove("active");document.removeEventListener("keydown",a)}};var f=function(l){if(l.classList.contains("active")){return}l.classList.add("active");var n=l.querySelectorAll(".popup-close");for(var m=0;m<n.length;m++){n[m].dataPopup=l;n[m].addEventListener("click",j)}d.push(l);if(!h.classList.contains("active")){h.classList.add("active");document.addEventListener("keydown",a)}};var c=function(p,q,o){var n=document.querySelectorAll("."+p);var l=document.querySelector("."+q);if(l){for(var m=0;m<n.length;m++){n[m].addEventListener("click",function(r){r.preventDefault();f(l);if(o){o(l)}})}}};var b=function(m){var l=m.querySelectorAll(".common-slider-slide");var r=m.querySelectorAll(".common-slider-switch");var t=m.querySelector(".common-slider-prev");var n=m.querySelector(".common-slider-next");var q=0;var s=function(u,v){l[u].classList.toggle("active",v);if(r[u]){r[u].classList.toggle("active",v)}};var o=function(u){if(u!==q){s(q,false);q=u;s(q,true)}};for(var p=0;p<l.length;p++){if(l[p].classList.contains("active")){q=p;break}}for(p=0;p<l.length;p++){s(p,p===q);if(r[p]){r[p].slideNo=p}}if(t){t.addEventListener("click",function(){var u=(q===0)?l.length-1:q-1;o(u)})}if(n){n.addEventListener("click",function(){var u=(q===l.length-1)?0:q+1;o(u)})}m.addEventListener("click",function(u){if(u.target.classList.contains("common-slider-switch")&&typeof u.target.slideNo!=="undefined"){o(u.target.slideNo)}})};var i=function(){var p=document.querySelector(".popup-feedback");if(!p){return}var n=p.querySelector("form");var l=p.querySelector("[name=name]");var o=p.querySelector("[name=email]");var m=p.querySelector("[name=msg]");n.addEventListener("submit",function(q){if(!l.value||!o.value||!m.value){q.preventDefault();p.classList.remove("popup-error");p.offsetWidth;p.classList.add("popup-error")}else{localStorage.setItem("feedback-name",l.value);localStorage.setItem("feedback-email",o.value)}})};window.addEventListener("load",function(){h=document.querySelector(".popup-wrapper");h.addEventListener("click",e);c("contacts-block-map","popup-map");c("contacts-block-feedback","popup-feedback",function(n){var o=n.querySelector("[name=name]");var q=n.querySelector("[name=email]");var p=n.querySelector("[name=msg]");o.value=localStorage.getItem("feedback-name");q.value=localStorage.getItem("feedback-email");p.value="";if(!o.value){o.focus()}else{if(!q.value){q.focus()}else{p.focus()}}});c("button-buy","popup-cartinfo");i();var m=document.querySelectorAll(".common-slider");for(var l=0;l<m.length;l++){b(m[l])}})})();